<%- include('../auth/header') %>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Home - E-Shop</title>
    <link rel="stylesheet" href="/css/styleAuth.css" />
    <style>
      body {
        font-family: Arial, Helvetica, sans-serif;
        background: #f7f7f7;
        color: #222;
      }
      .container {
        max-width: 1100px;
        margin: 36px auto;
        padding: 0 20px;
      }
      .products {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        justify-content: center;
      }

      .card {
        width: 320px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);
        overflow: hidden;
      }
      .card .media {
        width: 100%;
        height: 220px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 48px;
        color: #fff;
      }

      .card .body {
        padding: 16px;
      }
      .product-name {
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 6px;
      }
      .product-brand {
        font-size: 13px;
        color: #777;
        margin-bottom: 10px;
      }

      .price-row {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .price-current {
        font-size: 20px;
        font-weight: 800;
        color: #111;
      }
      .price-original {
        font-size: 14px;
        color: #999;
        text-decoration: line-through;
      }
      .discount-badge {
        margin-left: auto;
        background: #f44336;
        color: #fff;
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: 700;
        font-size: 13px;
      }

      .card .actions {
        display: flex;
        gap: 10px;
        margin-top: 14px;
      }
      .card form {
        margin: 0;
        flex: 1;
      }
      .btn {
        width: 100%;
        padding: 10px 12px;
        border-radius: 6px;
        border: 0;
        cursor: pointer;
        font-weight: 700;
      }
      .btn.wishlist {
        background: #ffb300;
        color: #111;
      }
      .btn.addcart {
        background: #2d8fef;
        color: #fff;
      }

      @media (max-width: 360px) {
        .card {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <main class="container">
      <h1 style="text-align: center; margin-bottom: 20px">Featured Product</h1>

      <section class="products">
        <% if(products && products.length){ %>
        <!-- Hard-coded product card -->
        <% products.forEach((product) => { %>
        <article class="card">
          <div class="media"><img src="<%= product.images %>" alt="" /></div>
          <div class="body">
            <div class="product-name"><%= product.productName %></div>
            <div class="product-brand"><%= product.brandName %></div>

            <div class="price-row">
              <div class="price-current"><%= product.currentPrice%></div>
              <div class="price-original"><%= product.originalPrice%></div>
              <div class="discount-badge">
                <%= Math.trunc(((product.originalPrice -
                product.currentPrice)/product.originalPrice)*100)%>%
              </div>
            </div>

            <div class="actions">
              <a href="/home/<%= product._id %>">View Details</a>
              <form method="POST" action="/wishlist/<%= product._id %>">
                <input type="hidden" name="productId" value="hardcoded-001" />
                <button class="btn wishlist" type="submit">
                  Add to Wishlist
                </button>
              </form>

              <form method="POST" action="/cart/<%= product._id %>">
                <input type="hidden" name="productId" value="hardcoded-001" />
                <input type="hidden" name="quantity" value="1" />
                <button class="btn addcart" type="submit">Add to Cart</button>
              </form>
            </div>
          </div>
        </article>
        <% }) %> <% } %>
      </section>
    </main>
  </body>
</html>
